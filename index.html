<!doctype html>

<meta charset="utf-8">
<title>Animazione Curva di Lissajous</title>
<link href='https://fonts.googleapis.com/css?family=Raleway' rel='stylesheet' type='text/css'>
<link rel="stylesheet" type="text/css" href="style.css">

<script id="vert" type="x-shader/x-vertex">
	attribute vec3 coordinates;
	void main() {
		gl_Position = vec4(coordinates, 1.0);
	}
</script>
<script id="frag" type="x-shader/x-fragment">
	#ifdef GL_ES
	precision mediump float;
	#endif
	
	#define M_2PI 6.28318531
	#define delta 0.004
	#define eps 0.02
	#define backColorR 0.188
	#define backColorG 0.22
	#define backColorB 0.25
	
	uniform float time;
	uniform vec2 size, freq;
	
	void main() {
		vec2 pos = ((gl_FragCoord.xy / size) - 0.5) * 3.0;
		float color = 0.0;
		for (float t = 0.0; t < M_2PI; t += delta) {
			color += step(abs(cos(freq.x * t + time) - pos.x), eps) * step(abs(sin(freq.y * t) - pos.y), eps);
		}
		gl_FragColor = vec4(color + backColorR, backColorG, backColorB, 1.0);
	}
</script>

<script src="js/app.js"></script>
<script src="js/lissajous.js"></script>
<script src="js/draw.js"></script>

<div id="container">
	<header>Curve di Lissajous</header>
	
	<div id="canvasDiv">
		<canvas id="drawingCanvas" width="512" height="512">Il tuo browser non supporta canvas.</canvas>
	</div>
	
	<div id="controlsArea">
		<p>Frequenza X: <input class="dataEntry" type="number" id="Fx" onchange="app.fx = parseFloat(this.value)" value="1" min="1" max="10"></p>
		<p>Frequenza Y: <input class="dataEntry" type="number" id="Fy" onchange="app.fy = parseFloat(this.value)" value="1" min="1" max="10"></p>
		<p>Velocit√†: <input class="slider" type="range" id="Speed" onchange="app.speed = parseFloat(this.value)" value="5" min="1" max="10"></p>
	</div>
	
	<footer>Giulia Scocco, Giulio Zausa, Nicola Marigo<br /><a href="?hw=true" id="hwLabel">Abilita accelerazione hardware</a></footer>
</div>

<script>
	app.init();
</script>
